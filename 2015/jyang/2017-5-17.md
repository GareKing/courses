2017-5-15
周末数学建模学习了BP神经网络（人工神经网络）初步了解了神经网络的思路以及matlab神经网络工具箱的使用
以时间序列预测为例：
通过设置时间数列的一部分作为输入，与时间对应的指标值作为输出作为训练样本，经过多次迭代，获得拟合效果较好的网络模型
网络节点数量可控制，默认为10，隐层的数量也可控制，以下面的代码做解释：

%处理数据

echo on  %窗口响应执行过程
clc
pause
f=xlsread('car','C3:C37');%预测时间序号
b=xlsread('car','F3:F37');%读取指数
c=xlsread('car','E3:E37');
d=xlsread('car','H3:H37');
e=xlsread('car','B3:B37');
num=1;   %初始项
endNum=18;
% 输入项
v0=[e(num:end-endNum);f(num:end-endNum);d(num:end-endNum)];
p0=[d(num+1:end)]
[v,vps]=mapminmax(v0) ;
[p,pps]=mapminmax(p0);%输入输出数据归一化处理
%建立神经网络
[v,p]=simplefit_dataset;
net=feedforwardnet([5,3]); %设置节点数量，可设置为一维的也可设置为二维的，通常二维的迭代速度加快
net.trainParam.epochs=9000; %训练次数
net.trainParam.goal=0.0002;
[net,tr]=train(net,v,p);
save net01 net;
load('net01.mat')
v_test0=[e(end-endNum:end-1);f(end-endNum:end-1);d(end-endNum:end-1)];
[v_test,v_testps]=mapminmax('apply,'v_test0,vps);  %以vps的归一化规则对测试集归一化
result0=mapminmax('reverse',v_test,pps)    %反归一化还原原数据集
presict=sim(net,v_test)
保存网络之后，通过仿真函数sim，作用于测试集进行预测
